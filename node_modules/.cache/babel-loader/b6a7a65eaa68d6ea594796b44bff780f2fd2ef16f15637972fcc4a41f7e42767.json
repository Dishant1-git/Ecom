{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ranag\\\\OneDrive\\\\Desktop\\\\reactprojectstudent\\\\src\\\\cartcontext.js\",\n  _s = $RefreshSig$();\n// CartContext.js\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children,\n  userid,\n  Loggedin\n}) => {\n  _s();\n  const [cartDataa, setCartDataa] = useState([]);\n  const [totalPricee, setTotalPricee] = useState(0);\n\n  // Fetch cart data from backend when userid or Loggedin changes\n  useEffect(() => {\n    if (!Loggedin) {\n      setCartDataa([]);\n      setTotalPricee(0);\n      return;\n    }\n    const fetchCartData = async () => {\n      try {\n        const response = await fetch(`http://localhost:9000/api/cartdata/${userid}`);\n        const result = await response.json();\n        if (result.statuscode === 1) {\n          const itemsWithQuantity = result.data.map(item => ({\n            ...item,\n            qnt: item.productquantity || 1\n          }));\n          setCartData(itemsWithQuantity);\n        } else {\n          setCartData([]);\n        }\n      } catch (error) {\n        console.error(\"Error fetching cart:\", error);\n        setCartData([]);\n      }\n    };\n    fetchCartData();\n  }, [userid, Loggedin]);\n\n  // Calculate total price when cartData changes\n  useEffect(() => {\n    const total = cartDataa.reduce((sum, item) => {\n      return sum + parseFloat(item.productprice) * parseInt(item.qnt);\n    }, 0);\n    setTotalPrice(total.toFixed(2));\n  }, [cartData]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartDataa,\n      setCartDataa,\n      totalPricee,\n      setTotalPricee\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"O+28rBp/HaNlYjVBLfDpCG3LYlA=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","CartContext","CartProvider","children","userid","Loggedin","_s","cartDataa","setCartDataa","totalPricee","setTotalPricee","fetchCartData","response","fetch","result","json","statuscode","itemsWithQuantity","data","map","item","qnt","productquantity","setCartData","error","console","total","reduce","sum","parseFloat","productprice","parseInt","setTotalPrice","toFixed","cartData","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ranag/OneDrive/Desktop/reactprojectstudent/src/cartcontext.js"],"sourcesContent":["// CartContext.js\r\nimport React, { createContext, useState, useEffect } from \"react\";\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children, userid, Loggedin }) => {\r\n  const [cartDataa, setCartDataa] = useState([]);\r\n  const [totalPricee, setTotalPricee] = useState(0);\r\n\r\n  // Fetch cart data from backend when userid or Loggedin changes\r\n  useEffect(() => {\r\n    if (!Loggedin) {\r\n      setCartDataa([]);\r\n      setTotalPricee(0);\r\n      return;\r\n    }\r\n\r\n    const fetchCartData = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:9000/api/cartdata/${userid}`);\r\n        const result = await response.json();\r\n\r\n        if (result.statuscode === 1) {\r\n          const itemsWithQuantity = result.data.map(item => ({\r\n            ...item,\r\n            qnt: item.productquantity || 1\r\n          }));\r\n          setCartData(itemsWithQuantity);\r\n        } else {\r\n          setCartData([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching cart:\", error);\r\n        setCartData([]);\r\n      }\r\n    };\r\n\r\n    fetchCartData();\r\n  }, [userid, Loggedin]);\r\n\r\n  // Calculate total price when cartData changes\r\n  useEffect(() => {\r\n    const total = cartDataa.reduce((sum, item) => {\r\n      return sum + parseFloat(item.productprice) * parseInt(item.qnt);\r\n    }, 0);\r\n    setTotalPrice(total.toFixed(2));\r\n  }, [cartData]);\r\n\r\n  return (\r\n    <CartContext.Provider value={{ cartDataa, setCartDataa, totalPricee, setTotalPricee }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMM,YAAY,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,MAAM;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC9D,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC;;EAEjD;EACAC,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,QAAQ,EAAE;MACbG,YAAY,CAAC,EAAE,CAAC;MAChBE,cAAc,CAAC,CAAC,CAAC;MACjB;IACF;IAEA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsCT,MAAM,EAAE,CAAC;QAC5E,MAAMU,MAAM,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAEpC,IAAID,MAAM,CAACE,UAAU,KAAK,CAAC,EAAE;UAC3B,MAAMC,iBAAiB,GAAGH,MAAM,CAACI,IAAI,CAACC,GAAG,CAACC,IAAI,KAAK;YACjD,GAAGA,IAAI;YACPC,GAAG,EAAED,IAAI,CAACE,eAAe,IAAI;UAC/B,CAAC,CAAC,CAAC;UACHC,WAAW,CAACN,iBAAiB,CAAC;QAChC,CAAC,MAAM;UACLM,WAAW,CAAC,EAAE,CAAC;QACjB;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5CD,WAAW,CAAC,EAAE,CAAC;MACjB;IACF,CAAC;IAEDZ,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACP,MAAM,EAAEC,QAAQ,CAAC,CAAC;;EAEtB;EACAP,SAAS,CAAC,MAAM;IACd,MAAM4B,KAAK,GAAGnB,SAAS,CAACoB,MAAM,CAAC,CAACC,GAAG,EAAER,IAAI,KAAK;MAC5C,OAAOQ,GAAG,GAAGC,UAAU,CAACT,IAAI,CAACU,YAAY,CAAC,GAAGC,QAAQ,CAACX,IAAI,CAACC,GAAG,CAAC;IACjE,CAAC,EAAE,CAAC,CAAC;IACLW,aAAa,CAACN,KAAK,CAACO,OAAO,CAAC,CAAC,CAAC,CAAC;EACjC,CAAC,EAAE,CAACC,QAAQ,CAAC,CAAC;EAEd,oBACElC,OAAA,CAACC,WAAW,CAACkC,QAAQ;IAACC,KAAK,EAAE;MAAE7B,SAAS;MAAEC,YAAY;MAAEC,WAAW;MAAEC;IAAe,CAAE;IAAAP,QAAA,EACnFA;EAAQ;IAAAkC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAClC,EAAA,CAhDWJ,YAAY;AAAAuC,EAAA,GAAZvC,YAAY;AAAA,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
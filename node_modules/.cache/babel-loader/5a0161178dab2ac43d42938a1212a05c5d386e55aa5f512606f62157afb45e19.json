{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ranag\\\\OneDrive\\\\Desktop\\\\reactprojectstudent\\\\src\\\\cartcontext.js\",\n  _s = $RefreshSig$();\n// CartContext.js\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = ({\n  children,\n  userid,\n  Loggedin\n}) => {\n  _s();\n  const [cartData, setCartData] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n\n  // Fetch cart data from backend when userid or Loggedin changes\n  useEffect(() => {\n    if (!Loggedin) {\n      setCartData([]);\n      setTotalPrice(0);\n      return;\n    }\n    const fetchCartData = async () => {\n      try {\n        const response = await fetch(`http://localhost:9000/api/cartdata/${userid}`);\n        const result = await response.json();\n        if (result.statuscode === 1) {\n          const itemsWithQuantity = result.data.map(item => ({\n            ...item,\n            qnt: item.productquantity || 1\n          }));\n          setCartData(itemsWithQuantity);\n        } else {\n          setCartData([]);\n        }\n      } catch (error) {\n        console.error(\"Error fetching cart:\", error);\n        setCartData([]);\n      }\n    };\n    fetchCartData();\n  }, [userid, Loggedin]);\n\n  // Calculate total price when cartData changes\n  useEffect(() => {\n    const total = cartData.reduce((sum, item) => {\n      return sum + parseFloat(item.productprice) * parseInt(item.qnt);\n    }, 0);\n    setTotalPrice(total.toFixed(2));\n  }, [cartData]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartDataa,\n      setCartData,\n      totalPrice,\n      setTotalPrice\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"FjYCqXROHhJq7zMCbhP/WhNF46w=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","CartContext","CartProvider","children","userid","Loggedin","_s","cartData","setCartData","totalPrice","setTotalPrice","fetchCartData","response","fetch","result","json","statuscode","itemsWithQuantity","data","map","item","qnt","productquantity","error","console","total","reduce","sum","parseFloat","productprice","parseInt","toFixed","Provider","value","cartDataa","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ranag/OneDrive/Desktop/reactprojectstudent/src/cartcontext.js"],"sourcesContent":["// CartContext.js\r\nimport React, { createContext, useState, useEffect } from \"react\";\r\n\r\nexport const CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children, userid, Loggedin }) => {\r\n  const [cartData, setCartData] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  // Fetch cart data from backend when userid or Loggedin changes\r\n  useEffect(() => {\r\n    if (!Loggedin) {\r\n      setCartData([]);\r\n      setTotalPrice(0);\r\n      return;\r\n    }\r\n\r\n    const fetchCartData = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:9000/api/cartdata/${userid}`);\r\n        const result = await response.json();\r\n\r\n        if (result.statuscode === 1) {\r\n          const itemsWithQuantity = result.data.map(item => ({\r\n            ...item,\r\n            qnt: item.productquantity || 1\r\n          }));\r\n          setCartData(itemsWithQuantity);\r\n        } else {\r\n          setCartData([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching cart:\", error);\r\n        setCartData([]);\r\n      }\r\n    };\r\n\r\n    fetchCartData();\r\n  }, [userid, Loggedin]);\r\n\r\n  // Calculate total price when cartData changes\r\n  useEffect(() => {\r\n    const total = cartData.reduce((sum, item) => {\r\n      return sum + parseFloat(item.productprice) * parseInt(item.qnt);\r\n    }, 0);\r\n    setTotalPrice(total.toFixed(2));\r\n  }, [cartData]);\r\n\r\n  return (\r\n    <CartContext.Provider value={{ cartDataa, setCartData, totalPrice, setTotalPrice }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,CAAC;AAE1C,OAAO,MAAMM,YAAY,GAAGA,CAAC;EAAEC,QAAQ;EAAEC,MAAM;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC9D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACY,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACAC,SAAS,CAAC,MAAM;IACd,IAAI,CAACO,QAAQ,EAAE;MACbG,WAAW,CAAC,EAAE,CAAC;MACfE,aAAa,CAAC,CAAC,CAAC;MAChB;IACF;IAEA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,sCAAsCT,MAAM,EAAE,CAAC;QAC5E,MAAMU,MAAM,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;QAEpC,IAAID,MAAM,CAACE,UAAU,KAAK,CAAC,EAAE;UAC3B,MAAMC,iBAAiB,GAAGH,MAAM,CAACI,IAAI,CAACC,GAAG,CAACC,IAAI,KAAK;YACjD,GAAGA,IAAI;YACPC,GAAG,EAAED,IAAI,CAACE,eAAe,IAAI;UAC/B,CAAC,CAAC,CAAC;UACHd,WAAW,CAACS,iBAAiB,CAAC;QAChC,CAAC,MAAM;UACLT,WAAW,CAAC,EAAE,CAAC;QACjB;MACF,CAAC,CAAC,OAAOe,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5Cf,WAAW,CAAC,EAAE,CAAC;MACjB;IACF,CAAC;IAEDG,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACP,MAAM,EAAEC,QAAQ,CAAC,CAAC;;EAEtB;EACAP,SAAS,CAAC,MAAM;IACd,MAAM2B,KAAK,GAAGlB,QAAQ,CAACmB,MAAM,CAAC,CAACC,GAAG,EAAEP,IAAI,KAAK;MAC3C,OAAOO,GAAG,GAAGC,UAAU,CAACR,IAAI,CAACS,YAAY,CAAC,GAAGC,QAAQ,CAACV,IAAI,CAACC,GAAG,CAAC;IACjE,CAAC,EAAE,CAAC,CAAC;IACLX,aAAa,CAACe,KAAK,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC;EACjC,CAAC,EAAE,CAACxB,QAAQ,CAAC,CAAC;EAEd,oBACEP,OAAA,CAACC,WAAW,CAAC+B,QAAQ;IAACC,KAAK,EAAE;MAAEC,SAAS;MAAE1B,WAAW;MAAEC,UAAU;MAAEC;IAAc,CAAE;IAAAP,QAAA,EAChFA;EAAQ;IAAAgC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAAChC,EAAA,CAhDWJ,YAAY;AAAAqC,EAAA,GAAZrC,YAAY;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
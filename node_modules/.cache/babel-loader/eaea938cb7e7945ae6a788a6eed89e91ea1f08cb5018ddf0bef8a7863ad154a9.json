{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\n\n// Initial state with clear structure\nconst initialState = {\n  isLoggedIn: false,\n  // Renamed for clarity (Loggedin → isLoggedIn)\n  username: \"Guest\",\n  userType: \"\",\n  // Renamed for consistency (usertype → userType)\n  firstName: \"\",\n  // Renamed for consistency (firstname → firstName)\n  email: \"\",\n  userId: null,\n  // Changed from \"\" to null for better semantics\n  token: null,\n  // Added token storage\n  lastLogin: null // Added for potential future use\n};\nconst userslice = createSlice({\n  name: \"user\",\n  initialState,\n  reducers: {\n    loginSuccess: (state, action) => {\n      const {\n        userId,\n        username,\n        userType,\n        firstName,\n        email,\n        token\n      } = action.payload;\n      if (!userId) {\n        console.error(\"Login failed: No user ID provided\");\n        return;\n      }\n      state.isLoggedIn = true;\n      state.userId = userId;\n      state.username = username || \"User\";\n      state.userType = userType || \"\";\n      state.firstName = firstName || \"\";\n      state.email = email || \"\";\n      state.token = token || null;\n      state.lastLogin = new Date().toISOString();\n    },\n    logout: state => {\n      // Reset all values to initial state\n      Object.assign(state, initialState);\n    },\n    updateUser: (state, action) => {\n      // For partial updates of user data\n      Object.keys(action.payload).forEach(key => {\n        if (key in state) {\n          state[key] = action.payload[key];\n        }\n      });\n    }\n  }\n});\n\n// Enhanced selectors\nexport const selectCurrentUser = state => state.user;\nexport const selectUserId = state => state.user.userId;\nexport const selectIsLoggedIn = state => state.user.isLoggedIn;\nexport const selectUserToken = state => state.user.token;\n\n// Renamed actions for consistency\nexport const {\n  loginSuccess: userLogin,\n  logout: userLogout,\n  updateUser: updateUserData\n} = userslice.actions;\nexport default userslice.reducer;","map":{"version":3,"names":["createSlice","initialState","isLoggedIn","username","userType","firstName","email","userId","token","lastLogin","userslice","name","reducers","loginSuccess","state","action","payload","console","error","Date","toISOString","logout","Object","assign","updateUser","keys","forEach","key","selectCurrentUser","user","selectUserId","selectIsLoggedIn","selectUserToken","userLogin","userLogout","updateUserData","actions","reducer"],"sources":["C:/Users/ranag/OneDrive/Desktop/reactprojectstudent/src/reducer/userslice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\n// Initial state with clear structure\r\nconst initialState = {\r\n  isLoggedIn: false,       // Renamed for clarity (Loggedin → isLoggedIn)\r\n  username: \"Guest\",\r\n  userType: \"\",            // Renamed for consistency (usertype → userType)\r\n  firstName: \"\",           // Renamed for consistency (firstname → firstName)\r\n  email: \"\",\r\n  userId: null,            // Changed from \"\" to null for better semantics\r\n  token: null,             // Added token storage\r\n  lastLogin: null          // Added for potential future use\r\n};\r\n\r\nconst userslice = createSlice({\r\n  name: \"user\",\r\n  initialState,\r\n  reducers: {\r\n    loginSuccess: (state, action) => {\r\n      const { \r\n        userId, \r\n        username, \r\n        userType, \r\n        firstName, \r\n        email, \r\n        token \r\n      } = action.payload;\r\n      \r\n      if (!userId) {\r\n        console.error(\"Login failed: No user ID provided\");\r\n        return;\r\n      }\r\n\r\n      state.isLoggedIn = true;\r\n      state.userId = userId;\r\n      state.username = username || \"User\";\r\n      state.userType = userType || \"\";\r\n      state.firstName = firstName || \"\";\r\n      state.email = email || \"\";\r\n      state.token = token || null;\r\n      state.lastLogin = new Date().toISOString();\r\n    },\r\n    logout: (state) => {\r\n      // Reset all values to initial state\r\n      Object.assign(state, initialState);\r\n    },\r\n    updateUser: (state, action) => {\r\n      // For partial updates of user data\r\n      Object.keys(action.payload).forEach(key => {\r\n        if (key in state) {\r\n          state[key] = action.payload[key];\r\n        }\r\n      });\r\n    }\r\n  },\r\n});\r\n\r\n// Enhanced selectors\r\nexport const selectCurrentUser = (state) => state.user;\r\nexport const selectUserId = (state) => state.user.userId;\r\nexport const selectIsLoggedIn = (state) => state.user.isLoggedIn;\r\nexport const selectUserToken = (state) => state.user.token;\r\n\r\n// Renamed actions for consistency\r\nexport const { \r\n  loginSuccess: userLogin, \r\n  logout: userLogout, \r\n  updateUser: updateUserData \r\n} = userslice.actions;\r\n\r\nexport default userslice.reducer;"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;;AAE9C;AACA,MAAMC,YAAY,GAAG;EACnBC,UAAU,EAAE,KAAK;EAAQ;EACzBC,QAAQ,EAAE,OAAO;EACjBC,QAAQ,EAAE,EAAE;EAAa;EACzBC,SAAS,EAAE,EAAE;EAAY;EACzBC,KAAK,EAAE,EAAE;EACTC,MAAM,EAAE,IAAI;EAAa;EACzBC,KAAK,EAAE,IAAI;EAAc;EACzBC,SAAS,EAAE,IAAI,CAAU;AAC3B,CAAC;AAED,MAAMC,SAAS,GAAGV,WAAW,CAAC;EAC5BW,IAAI,EAAE,MAAM;EACZV,YAAY;EACZW,QAAQ,EAAE;IACRC,YAAY,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC/B,MAAM;QACJR,MAAM;QACNJ,QAAQ;QACRC,QAAQ;QACRC,SAAS;QACTC,KAAK;QACLE;MACF,CAAC,GAAGO,MAAM,CAACC,OAAO;MAElB,IAAI,CAACT,MAAM,EAAE;QACXU,OAAO,CAACC,KAAK,CAAC,mCAAmC,CAAC;QAClD;MACF;MAEAJ,KAAK,CAACZ,UAAU,GAAG,IAAI;MACvBY,KAAK,CAACP,MAAM,GAAGA,MAAM;MACrBO,KAAK,CAACX,QAAQ,GAAGA,QAAQ,IAAI,MAAM;MACnCW,KAAK,CAACV,QAAQ,GAAGA,QAAQ,IAAI,EAAE;MAC/BU,KAAK,CAACT,SAAS,GAAGA,SAAS,IAAI,EAAE;MACjCS,KAAK,CAACR,KAAK,GAAGA,KAAK,IAAI,EAAE;MACzBQ,KAAK,CAACN,KAAK,GAAGA,KAAK,IAAI,IAAI;MAC3BM,KAAK,CAACL,SAAS,GAAG,IAAIU,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAC5C,CAAC;IACDC,MAAM,EAAGP,KAAK,IAAK;MACjB;MACAQ,MAAM,CAACC,MAAM,CAACT,KAAK,EAAEb,YAAY,CAAC;IACpC,CAAC;IACDuB,UAAU,EAAEA,CAACV,KAAK,EAAEC,MAAM,KAAK;MAC7B;MACAO,MAAM,CAACG,IAAI,CAACV,MAAM,CAACC,OAAO,CAAC,CAACU,OAAO,CAACC,GAAG,IAAI;QACzC,IAAIA,GAAG,IAAIb,KAAK,EAAE;UAChBA,KAAK,CAACa,GAAG,CAAC,GAAGZ,MAAM,CAACC,OAAO,CAACW,GAAG,CAAC;QAClC;MACF,CAAC,CAAC;IACJ;EACF;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMC,iBAAiB,GAAId,KAAK,IAAKA,KAAK,CAACe,IAAI;AACtD,OAAO,MAAMC,YAAY,GAAIhB,KAAK,IAAKA,KAAK,CAACe,IAAI,CAACtB,MAAM;AACxD,OAAO,MAAMwB,gBAAgB,GAAIjB,KAAK,IAAKA,KAAK,CAACe,IAAI,CAAC3B,UAAU;AAChE,OAAO,MAAM8B,eAAe,GAAIlB,KAAK,IAAKA,KAAK,CAACe,IAAI,CAACrB,KAAK;;AAE1D;AACA,OAAO,MAAM;EACXK,YAAY,EAAEoB,SAAS;EACvBZ,MAAM,EAAEa,UAAU;EAClBV,UAAU,EAAEW;AACd,CAAC,GAAGzB,SAAS,CAAC0B,OAAO;AAErB,eAAe1B,SAAS,CAAC2B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}